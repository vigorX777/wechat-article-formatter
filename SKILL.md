---
name: wechat-article-formatter
description: 将 Markdown 文稿转换为微信公众号兼容的 HTML 格式。支持 Claude 风格（简约橙）和橙韵风格（杂志卡片）两种预设主题。自动处理公众号编辑器的 CSS 兼容性问题（div 转 table、代码块换行、表格背景色等）。触发词：「公众号排版」「微信文章格式化」「WeChat article」「格式化为公众号」「转换为微信格式」。
---

# 微信文章排版生成器 (WeChat Article Formatter)

本 Skill 旨在将 Markdown 文稿一键转换为微信公众号编辑器完美兼容的 HTML 格式，彻底解决粘贴后排版错乱、CSS 失效等痛点。

## 核心能力

- **Markdown → 公众号 HTML**: 自动转换标题、列表、引用、表格等 Markdown 元素。
- **CSS 兼容性引擎**: 自动执行 `div` 转 `table`、`white-space` 预处理等兼容性修复。
- **双主题支持**: 预设 **Claude 风格**（简约橙）和 **橙韵风格**（杂志卡片），用户触发后选择。
- **一键复制准备**: 输出结构优化的 HTML，支持直接粘贴到公众号编辑器。

## 工作流程（必须遵循）

### 第一步：主题选择

**触发 Skill 后，必须首先询问用户选择主题风格：**

| 主题 | 特点 | 适用场景 |
|------|------|----------|
| **Claude 风格** | 简约橙色、左边框标题、清爽段落 | 技术分享、日常随笔、简短内容 |
| **橙韵风格** | 渐变头图、卡片布局、中文序号章节 | 深度解读、专题报道、长文精读 |

**提问示例：**
> 请选择排版主题：
> 1. **Claude 风格** - 简约清爽，适合技术分享
> 2. **橙韵风格** - 杂志卡片，适合深度解读
>
> 输入 1 或 2，或直接说「Claude」/「橙韵」

### 第二步：解析与转换

根据用户选择的主题，加载对应的样式规范进行转换：
- Claude 风格 → 参考 [references/element-styles.md](references/element-styles.md)
- 橙韵风格 → 参考 [references/chengyun-element-styles.md](references/chengyun-element-styles.md)

### 第三步：输出文件

生成的产物存放在 `.wechat-output/` 目录下，提供一键复制功能。

## 快速开始

输入以下命令对 Markdown 文件进行排版：

```bash
/wechat-format @article.md
```

或者使用自然语言：
- "帮我把 @report.md 格式化为公众号文章"
- "用橙韵风格排版 @深度解读.md"

## 主题详情

### Claude 风格（简约橙）

简约橙色主题，适合技术分享、深度思考类文章。详见 [references/element-styles.md](references/element-styles.md)。

| 用途 | 色值 | 说明 |
|------|------|------|
| 主色 | `#D97757` | 标题边框、强调文字 |
| 背景浅 | `#FFF5F0` | 图片占位符背景 |
| 背景灰 | `#FAF9F7` | 表格交替行、代码块背景 |

**结构特点：**
- H2 标题带 4px 左边框
- 引用块使用浅灰背景
- 整体风格简洁清爽

### 橙韵风格（杂志卡片）

渐变头图 + 卡片布局，适合深度解读、专题报道类文章。详见 [references/chengyun-element-styles.md](references/chengyun-element-styles.md)。

| 用途 | 色值 | 说明 |
|------|------|------|
| 主色-亮 | `#fb923c` | 渐变起始色 |
| 主色-深 | `#ea580c` | 渐变结束色 |
| 强调色 | `#d97706` | 文字高亮、左边框 |
| 页面背景 | `#fcfbf8` | 浅米色/暖白 |

**结构特点：**
- 橙色渐变头部区域（带胶囊标签、主副标题）
- 白色内容卡片（负 margin 上移效果）
- 章节标题使用中文序号方块（一、二、三...）
- 引用块使用浅黄渐变背景
- 渐变分隔线

## 公众号 CSS 兼容性规范摘要

由于公众号编辑器的严格过滤，排版时需遵循以下原则（详见 [references/css-compatibility.md](references/css-compatibility.md)）：

1. **容器替换**: 尽量使用 `<section>` 替代 `<div>`，避免使用 `<table>` 做布局。
2. **背景色声明**: 如需使用表格，样式必须写在 `<td>` 或 `<th>` 上，而非 `<tr>`。
3. **代码块处理**: 不支持 `white-space: pre-wrap`，需将换行符转为 `<br>` 并处理空格。
4. **装饰限制**: 慎用 `dashed` 虚线边框，可放心使用 `border-radius` 和 `linear-gradient`。
5. **禁用布局**: 不支持 `flex`、`grid`，需使用 `inline-block` 或嵌套结构。

## 输出文件说明

生成的产物将存放在 `.wechat-output/` 目录下：
- `article.html`: 可直接用浏览器打开并复制的预览页面。
- `raw-content.txt`: 纯 HTML 代码片段。

## 验证清单

### 通用检查
- [ ] 所有样式是否已内联（无 `<style>` 标签）？
- [ ] 代码块的长行是否已处理为可自动换行的 HTML 结构？
- [ ] 图片占位符是否包含原始文件名以便用户替换？

### Claude 风格检查
- [ ] 表格背景色是否已正确应用到 `td` 标签？
- [ ] 引用块 (blockquote) 的边框是否符合主题配色？

### 橙韵风格检查
- [ ] 头部渐变区域是否完整（标签、主标题、副标题、日期）？
- [ ] 白色内容卡片是否使用负 margin 上移？
- [ ] 章节标题是否使用中文序号方块（一、二、三...）？
- [ ] 引用块是否使用浅黄渐变背景和左边框？
- [ ] 分隔线是否使用渐变效果？
